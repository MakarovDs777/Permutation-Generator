<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Генератор перестановок символов с поиском</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
    }
    #permutations {
        width: 100%;
        height: 300px;
        margin-top: 20px;
        border: 1px solid #ccc;
        padding: 10px;
        overflow-y: scroll;
        white-space: pre-wrap;
        font-family: monospace;
    }
    #countDisplay {
        margin-top: 10px;
        font-weight: bold;
    }
</style>
</head>
<body>

<h2>Генератор перестановок</h2>
<label>Введите символы:</label><br>
<input type="text" id="charInput" style="width: 300px;" placeholder="например, abc" value="abc"><br><br>

<button onclick="generatePermutationsNoRepeats()">Без повторов</button>
<button onclick="generatePermutationsWithRepeats()">С повторами</button>

<div id="countDisplay"></div>

<div style="margin-top:20px;">
    <label>Поиск перестановки:</label><br>
    <input type="text" id="searchPermutation" style="width: 300px;" placeholder="Введите перестановку для поиска">
    <button onclick="searchPermutation()">Найти</button>
</div>

<div id="searchResult" style="margin-top:10px; font-weight: bold;"></div>
<div id="permutations"></div>

<script>
    let currentResults = [];

    // Генерация перестановок без повторов
    function generatePermutationsNoRepeats() {
        const inputStr = document.getElementById('charInput').value.trim();
        if (inputStr.length === 0) {
            alert('Пожалуйста, введите символы.');
            return;
        }
        const chars = Array.from(new Set(inputStr.split('')));
        currentResults = [];

        function permute(arr, m = []) {
            if (arr.length === 0) {
                currentResults.push(m.join(''));
            } else {
                for (let i = 0; i < arr.length; i++) {
                    const curr = arr.slice();
                    curr.splice(i, 1);
                    permute(curr, m.concat(arr[i]));
                }
            }
        }

        permute(chars);
        displayResults();
    }

    // Генерация перестановок с повторами
    function generatePermutationsWithRepeats() {
        const inputStr = document.getElementById('charInput').value.trim();
        if (inputStr.length === 0) {
            alert('Пожалуйста, введите символы.');
            return;
        }
        const chars = inputStr.split('');
        currentResults = [];
        const length = chars.length;

        function permuteWithRepeats(current = []) {
            if (current.length === length) {
                currentResults.push(current.join(''));
                return;
            }
            for (let ch of chars) {
                permuteWithRepeats(current.concat(ch));
            }
        }

        permuteWithRepeats();
        displayResults();
    }

    // Отображение результатов
    function displayResults() {
        document.getElementById('permutations').innerText = currentResults.join('\n');
        document.getElementById('countDisplay').innerText = `Всего перестановок: ${currentResults.length}`;
        document.getElementById('searchResult').innerText = '';
    }

    // Поиск перестановки
    function searchPermutation() {
        const searchStr = document.getElementById('searchPermutation').value.trim();
        if (searchStr.length === 0) {
            alert('Введите перестановку для поиска.');
            return;
        }
        const index = currentResults.indexOf(searchStr);
        if (index !== -1) {
            document.getElementById('searchResult').innerText = `Перестановка найдена! Номер: ${index + 1}`;
        } else {
            document.getElementById('searchResult').innerText = 'Перестановка не найдена.';
        }
    }
</script>
</body>
</html>
